(function (a) {
    a("#sure").on("tap", function () {
        if (validate.check("#testForm")) {
            var c = {phone: a("#loginName").val(), code: a("#smsCode").val(), password: a("#password").val()};
            var b = {
                doing: function () {
                    setTimeout(function () {
                        hzAPI.register("http://ywtwx.dept.nfyy.com/ywtapi/?c=Index&a=updateUserPwd", c, ["密码重置失败", "密码重置成功,请重新登录"], null, "login.html")
                    }, 100)
                }
            };
            hzAPI.register("http://ywtwx.dept.nfyy.com/ywtapi/?c=Index&a=checkPhone", c, ["密码重置中", "该手机未注册"], b)
        }
    });
    a("#smsBt").on("click", function () {
        var c = {phone: a("#loginName").val()};
        var b = {
            doing: function () {
                timerBt.updateTimer("#smsBt");
                setTimeout(function () {
                    hzAPI.register("http://ywtwx.dept.nfyy.com/ywtapi/?c=Other&a=resetPwdVerifyCode", c, true)
                }, 100)
            }
        };
        if (c.phone.match(validate.rules.phone)) {
            hzAPI.register("http://ywtwx.dept.nfyy.com/ywtapi/?c=Index&a=checkPhone", c, ["该手机号码未被注册", "短信发送中"], b)
        } else {
            hzAPI.dialog(false, 1000, "手机号码为空或输入错误")
        }
    })
})(Zepto);