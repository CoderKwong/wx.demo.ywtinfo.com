(function(a){a(".slider").on("touchmove",function(b){b.preventDefault()});a.fn.touchSlider=function(n){var o=a.extend({},a.fn.touchSlider.defaults,n),x=this,f=x.find(o.itemSelector),l=x.find(o.tabBts),w=x.css("position"),s=x.height(),c=x.width(),j=0,b=0,p=0,g=false,t=false,y=false,k=false,h=false,m=null,q=(o.direction=="v"),e=q?s:c;w=="absolute"||w=="absolute"||(x.css({position:"relative"}));var r="";for(i=0;i<f.length;i++){r+='<a href="javascript:;">'+(i+1)+"</a>"}l.html(r);$tabItems=l.find("a");function v(){f.each(function(z,A){f.eq(z).css({position:"absolute",top:q?s+"px":0,left:q?0:c+"px","z-index":"1"})});f.eq(0).css(q?"top":"left",0);$tabItems.eq(0).addClass("active")}v();var m={status:true,times:3000,doing:function(){if(m.status){setTimeout(function(){u(b+1,0);j=j>=f.length-1?0:j+1;b=b>=f.length-1?0:b+1;if(b==0){v();m.doing()}else{m.doing()}},m.times)}},on:function(){m.status=true},off:function(){m.status=false}};if(f.length>1){m.doing()}x.on("touchstart",function(z){var A=z.touches[0];p=q?A.clientY:A.clientX;j=0;g=false;t=false;y=false;k=false;m.off()}).on("touchmove",function(B){var E=B.touches[0],A=q?E.clientY:E.clientX,D=A-p,C=0,z=0;j+=D;if(D<0&&!h){k=b==f.length-1&&!g?true:false;if(g){z=-e+j;C=b==0?b:b-1;u(C,z)}else{if(b!==f.length-1&&!y){z=e+j;C=b+1;u(C,z);t=true}}}if(D>0&&!h){y=b==0&&!t?true:false;if(t){z=e+j;C=b==f.length-1?b:b+1;u(C,z)}else{if(b!==0&&!k){z=-e+j;C=b-1;g=true;u(C,z)}}}p=A}).on("touchend",function(z){if(t){d(1)}if(g){d(-1)}});function d(A){h=true;var D=Math.abs(j)/e,B=D>o.slidePercent?"0px":e*A+"px",C=q?{top:B}:{left:B},E=-e*A+"px",z=q?{top:E}:{left:E};f.eq(b+A).animate(C,250,"ease-in",function(){if(D>o.slidePercent){f.eq(b).css(z).css("opacity","");f.eq(b+A).css({transition:"","z-index":1});b+=A;o.onMoveEnd(b)}else{f.eq(b).css("opacity","")}h=false})}function u(A,z){f.eq(b).css("opacity",1-Math.abs(j)/e);f.eq(A).css(q?"top":"left",z+"px").css({"z-index":2});a.each($tabItems,function(){if(a(this).hasClass("active")){a(this).removeClass("active")}});$tabItems.eq(A).addClass("active")}return this};a.fn.touchSlider.defaults={direction:"h",slidePercent:0.2,itemSelector:".page",tabBts:".tabBts",onMoveEnd:function(b){}};a(".slider").touchSlider()})(Zepto);