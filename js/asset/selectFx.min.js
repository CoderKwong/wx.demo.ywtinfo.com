(function(c){function a(h,g){if(!h){return false}var f=h.target||h.srcElement||h||false;while(f&&f!=g){f=f.parentNode||false}return(f!==false)}function d(f,e){for(var g in e){if(e.hasOwnProperty(g)){f[g]=e[g]}}return f}function b(f,e){this.el=f;this.options=d({},this.options);d(this.options,e);this._init()}b.prototype.options={newTab:true,stickyPlaceholder:true};b.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled;this.selectedOpt=e||this.el.querySelector("option");this._createSelectEl();this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]"));this.selOptsCount=this.selOpts.length;this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1;this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder");this._initEvents()};b.prototype._createSelectEl=function(){var e=this,g="",f=function(k){var i="",j="",l="";if(k.selectedOpt&&!this.foundSelected&&!this.hasDefaultPlaceholder){j+="cs-selected ";this.foundSelected=true}if(k.getAttribute("data-class")){j+=k.getAttribute("data-class")}if(k.getAttribute("data-link")){l="data-link="+k.getAttribute("data-link")}if(j!==""){i='class="'+j+'" '}return"<li "+i+l+' data-option data-value="'+k.value+'"><span>'+k.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(j){if(j.disabled){return}var i=j.tagName.toLowerCase();if(i==="option"){g+=f(j)}else{if(i==="optgroup"){g+='<li class="cs-optgroup"><span>'+j.label+"</span><ul>";[].slice.call(j.children).forEach(function(k){g+=f(k)});g+="</ul></li>"}}});var h='<div class="cs-options"><ul>'+g+"</ul></div>";this.selEl=document.createElement("div");this.selEl.className=this.el.className;this.selEl.tabIndex=this.el.tabIndex;this.selEl.innerHTML='<span class="cs-placeholder">'+this.selectedOpt.textContent+"</span>"+h;this.el.parentNode.appendChild(this.selEl);this.selEl.appendChild(this.el)};b.prototype._initEvents=function(){var e=this;this.selPlaceholder.addEventListener("click",function(){e._toggleSelect()});this.selOpts.forEach(function(g,f){g.addEventListener("click",function(){e.current=f;e._changeOption();e._toggleSelect()})});document.addEventListener("click",function(f){var g=f.target;if(e._isOpen()&&g!==e.selEl&&!a(g,e.selEl)){e._toggleSelect()}})};b.prototype._toggleSelect=function(){this._removeFocus();if(this._isOpen()){if(this.current!==-1){this.selPlaceholder.textContent=this.selOpts[this.current].textContent}classie.remove(this.selEl,"cs-active")}else{if(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder){this.selPlaceholder.textContent=this.selectedOpt.textContent}classie.add(this.selEl,"cs-active")}};b.prototype._changeOption=function(){if(typeof this.preSelCurrent!="undefined"&&this.preSelCurrent!==-1){this.current=this.preSelCurrent;this.preSelCurrent=-1}var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent;this.el.value=e.getAttribute("data-value");var f=this.selEl.querySelector("li.cs-selected");if(f){classie.remove(f,"cs-selected")}classie.add(e,"cs-selected");if(e.getAttribute("data-link")){if(this.options.newTab){c.open(e.getAttribute("data-link"),"_blank")}else{c.location=e.getAttribute("data-link")}}this.options.onChange(this.el.value)};b.prototype._isOpen=function(e){return classie.has(this.selEl,"cs-active")};b.prototype._removeFocus=function(f){var e=this.selEl.querySelector("li.cs-focus");if(e){classie.remove(e,"cs-focus")}};c.SelectFx=b})(window);